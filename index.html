<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>drake lol</title>
<meta name="theme-color" content="#000000">
<link href="https://fonts.googleapis.com/css2?family=Fustat:wght@300;400;700&display=swap" rel="stylesheet">
<style>
:root{--s:75px;--b:100px;--br:.7;--c:1.4;--top-padding:175px;--fade-height:50px;font-size:var(--s)}body{margin:0;overflow:hidden;font-family:Fustat,sans-serif;color:#ffffffc4;display:flex;justify-content:flex-start;align-items:flex-start;min-height:100vh;background-color:#000}.signature-container{position:fixed;top:var(--s);left:var(--s);z-index:3}.signature{height:var(--s);width:auto;user-select:none;opacity:.8;pointer-events:none}.g{position:fixed;top:0;left:0;width:100%;height:100vh;overflow:hidden;z-index:1}#c{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:400vw;height:400vh;transform-origin:center;z-index:-2001;pointer-events:none}#o{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;backdrop-filter:blur(var(--b)) brightness(var(--br)) contrast(var(--c)) saturate(var(--c));-webkit-backdrop-filter:blur(var(--b)) brightness(var(--br)) contrast(var(--c)) saturate(var(--c));z-index:2}#o::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="1.5" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(#n)"/></svg>');opacity:.08;mix-blend-mode:overlay;pointer-events:none;z-index:-2000}.b-c{display:flex;flex-direction:column;align-items:flex-start;margin-left:var(--s);z-index:3;gap:0;position:relative;overflow-y:auto;max-height:calc(100vh - var(--top-padding));padding-bottom:0;margin-top:calc(var(--top-padding) - 0px);mask-image:linear-gradient(to bottom, transparent,black var(--fade-height));-webkit-mask-image:linear-gradient(to bottom, transparent,black var(--fade-height))}.b-c::-webkit-scrollbar{display:none}.b-c{-ms-overflow-style:none;scrollbar-width:none}.b{opacity:.8;transition:opacity .3s,transform .3s,font-weight .3s;cursor:pointer;transform-origin:left;text-align:left;text-decoration:none;color:inherit;max-width:80vw;box-sizing:border-box;padding:0 10px;text-transform:lowercase;user-select:none;-webkit-user-drag:none;pointer-events:auto;font-weight:300;mix-blend-mode:multiply;position:relative;line-height:1.5}a[href*="youtube.com"]{margin-top:100px}a[href*="roblox.com"]{line-height:1.5}.b:hover{opacity:1;transform:scale(1.1);font-weight:700}#lastfm-button{word-wrap:break-word;white-space:normal}@media (max-width:768px){:root{--s:50px;--top-padding:125px;font-size:40px;--fade-height:50px}body{align-items:center}.signature-container{left:50%;transform:translateX(-50%);top:var(--s)}.b-c{flex-direction:column;align-items:center;margin-left:0;width:100%;max-height:calc(100vh - var(--top-padding));padding-bottom:0;margin-top:calc(var(--top-padding) - 50px)}.b{transform-origin:center;text-align:center;max-width:90%;padding:0 5px}a[href*="roblox.com"]{line-height:2}a[href*="youtube.com"]{margin-top:0}}@media (max-width:480px){:root{--s:35px;--top-padding:75px;--fade-height:35px}.b-c{gap:0;max-height:calc(100vh - var(--top-padding));padding-bottom:0;margin-top:calc(var(--top-padding) - 50px)}.b{max-width:95%;padding:0 2px}a[href*="roblox.com"]{line-height:1}a[href*="youtube.com"]{margin-top:0}}.corner-image{position:fixed;bottom:12px;right:12px;width:32px;height:32px;z-index:3;border-radius:8px;user-select:none;pointer-events:none}
</style>
</head>
<body>
<div class="signature-container"><img src='assets/signature/drakelol_signature.png' class="signature"></div>
<div class="g"><canvas id="c"></canvas></div><div id="o"></div>
<div class="b-c">
  <a class="b" href="https://www.youtube.com/c/drake_lol">youtube</a>
  <a class="b" href="https://www.instagram.com/drake_llol">instagram</a>
  <a class="b" href="https://steamcommunity.com/id/drake_lol">steam</a>
  <a class="b" href="https://www.roblox.com/users/76034569">roblox</a>
  <a class="b" id="lastfm-button">Last.fm</a>
</div>
<img src="assets/bgimg/full_blue_square_512.png" alt="Corner Image" class="corner-image">
<script>
let img = new Image(), d = 1.5, defaultImage = 'assets/bgimg/full_blue_square_512.png', state = "", c, x, w, h, R, C, I, qW, qH, frame, user;
img.crossOrigin = "Anonymous";
img.src = defaultImage; // Set the initial image source

const O = (r, c, q, f) => ({ x: c * (w / d) + (q % 2) * qW, y: r * (h / d) + ~~(q / 2) * qH, r: 360 * Math.random(), rS: (Math.random() - .5) * .25, s: (f?.6 : .8) + Math.random() * 2 * (f?.3 : .2), S: w * ((f?.6 : .8) + Math.random() * 2 * (f?.3 : .2)), H: h * ((f?.6 : .8) + Math.random() * 2 * (f?.3 : .2)), B: c * (w / d), Y: r * (h / d), q, f });

const init = () => {
  if (!c) { c = document.getElementById("c"); x = c.getContext("2d"); const o = window.devicePixelRatio || 1; c.width = innerWidth * o; c.height = innerHeight * o; x.scale(o, o); }
  w = img.width, h = img.height, C = Math.ceil(c.width / 2 / (w / d)), R = Math.ceil(c.height / 2 / (h / d)), qW = C * (w / d), qH = R * (h / d), I = [];
  for (let i = 0; i < 4; i++) for (let j = 0; j < R; j++) for (let k = 0; k < C; k++) I.push(O(j, k, i)), Math.random() < .3 && I.push(O(j, k, i, !0));
  I.sort((a, b) => a.f - b.f);
  getDominantColor();
  draw();
};

const draw = () => {
  cancelAnimationFrame(frame);
  I = I.filter(t => (t.r += t.rS, t.x = t.B + (t.q % 2) * qW, t.y = t.Y + ~~(t.q / 2) * qH, !(t.x + t.S < -2 * innerWidth || t.y + t.H < -2 * innerHeight || t.x > 3 * innerWidth || t.y > 3 * innerHeight)));
  for (let i = 0; i < 4; i++) for (let j = 0; j < R; j++) for (let k = 0; k < C; k++) if ((i % 2 == 0 && I.every(l => Math.abs(l.x - (k * (w / d))) > w)) || (i % 2 != 0 && I.every(l => Math.abs(l.x - ((C + k) * (w / d))) > w))) if (i < 2) { if (I.every(l => Math.abs(l.y - (j * (h / d))) > h)) I.push(O(j, k, i)) } else { if (I.every(l => Math.abs(l.y - ((R + j) * (h / d))) > h)) I.push(O(j, k, i)) };
  I.sort((a, b) => a.f - b.f);
  x.clearRect(0, 0, c.width, c.height);
  x.save(); x.beginPath(); x.rect(0, 0, c.width, c.height); x.clip();
  I.forEach(e => (x.save(), x.translate(e.x, e.y), x.rotate(e.r * Math.PI / 180), x.scale(e.s, e.s), x.drawImage(img, -w / 2, -h / 2, w, h), x.restore()));
  x.restore();
  frame = requestAnimationFrame(draw);
};

const rgbToHex = (r, g, b) => "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);

const getDominantColor = () => {
  const tempCanvas = document.createElement('canvas'), tempCtx = tempCanvas.getContext('2d');
  tempCanvas.width = img.width; tempCanvas.height = img.height;
  tempCtx.drawImage(img, 0, 0, img.width, img.height);
  const imageData = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height).data, colorCounts = {}, pixelSkip = 5;
  let maxCount = 0, dominantColor = null;
  for (let i = 0; i < imageData.length; i += 4 * pixelSkip) {
    if (imageData[i + 3] < 125) continue;
    const hex = rgbToHex(imageData[i], imageData[i + 1], imageData[i + 2]);
    colorCounts[hex] = (colorCounts[hex] || 0) + 1;
    if (colorCounts[hex] > maxCount) { maxCount = colorCounts[hex]; dominantColor = hex; }
  }
  if (dominantColor) document.querySelector('meta[name="theme-color"]').setAttribute('content', dominantColor);
};

const lastFmButton = document.getElementById('lastfm-button'), lastFmApiUrl = 'https://lastfm-red-surf-3b97.damp-unit-21f3.workers.dev/';
const updateLastFm = async () => {
  try {
    const res = await fetch(lastFmApiUrl);
    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
    const data = await res.json();
    const track = data.recenttracks?.track?.[0];
    const isPlaying = track?.["@attr"]?.nowplaying === "true";
    user = data.recenttracks?.["@attr"]?.user || user;
    lastFmButton.textContent = isPlaying ? `Listening to ${track.name} by ${track.artist["#text"]}` : "Last.fm";
    lastFmButton.href = isPlaying ? track.url || `https://last.fm/user/${user}` : user ? `https://www.last.fm/user/${user}` : "#";
    let imageUrl = track?.image[track.image.length - 1]["#text"] || defaultImage;
    if (imageUrl.includes("2a96cbd8b46e442fc41c2b86b821562f")) imageUrl = defaultImage;
    if (imageUrl !== img.src) { img.onload = init; img.src = imageUrl; }
    state = isPlaying ? "playing" : "Last.fm";
  } catch (error) {
    console.error("Error fetching Last.fm data:", error);
    lastFmButton.textContent = "Last.fm"; lastFmButton.href = "#";
    if (state !== "Error") { img.onload = init; img.src = defaultImage; state = "Error"; }
  }
};

// Initial setup: Load and initialize with the default image.
img.onload = init;  // Call init when the default image loads
updateLastFm();
setInterval(updateLastFm, 10000);
document.querySelectorAll('.b').forEach(el => el.addEventListener('contextmenu', e => e.preventDefault()));

</script>
</body>
</html>